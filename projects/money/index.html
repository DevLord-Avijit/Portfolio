<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Query Quest — Avijit Singh | A fun trivia-based session</title>

<!-- Basic meta -->
<meta name="description" content="Query Quest by Avijit Singh — a lighthearted, school-fun trivia-based project (not formal trivia but a fun session).">
<meta name="author" content="Avijit Singh">
<meta name="owner" content="Avijit Singh">
<meta name="keywords" content="fun, trivia, school, quiz, Avijit Singh, game, GK">
<meta name="robots" content="index, follow">
<meta name="theme-color" content="#008080">

<!-- Open Graph -->
<meta property="og:title" content="Query Quest — Avijit Singh">
<meta property="og:description" content="A fun trivia-based session by Avijit Singh — lighthearted school-fun questions and quick GK round.">
<meta property="og:type" content="website">
<meta property="og:url" content="./index.html">
<meta property="og:image" content="https://devlord-avijit.github.io/Portfolio/projects/money/opengraph.png">
<meta property="og:site_name" content="Avijit Singh — Projects">
<meta property="og:locale" content="en_US">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Query Quest — Avijit Singh">
<meta name="twitter:description" content="A fun trivia-based session by Avijit Singh">
<meta name="twitter:image" content="https://devlord-avijit.github.io/Portfolio/projects/money/opengraph.png">
<meta name="twitter:creator" content="@avijitsingh">

<!-- Favicons & touch icons (place these files in the same directory as this HTML) -->
<link rel="icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
/* Base body */
body {
    font-family: "MS Sans Serif", Arial, sans-serif;
    background: #008080;
    color: black;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
    min-height: 100vh;
    box-sizing: border-box;
}

/* Windows-style window container */
.window {
    background: #C0C0C0;
    border: 4px solid #000;
    box-shadow: 6px 6px 0 #404040;
    padding: 0;
    width: 90%;
    max-width: 700px;
    min-width: 300px;
    display: flex;
    flex-direction: column;
    font-size: 16px;
}

/* Title bar */
.title-bar {
    background: linear-gradient(to bottom, #000080, #0000A0);
    color: white;
    padding: 8px 10px;
    font-weight: bold;
    font-size: 1.2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: default;
}

/* Content area */
.content {
    background: #C0C0C0;
    padding: 20px;
    text-align: center;
    border-top: 2px solid #fff;
    border-left: 2px solid #fff;
    border-right: 2px solid #404040;
    border-bottom: 2px solid #404040;
    min-height: 300px;
}

/* Buttons */
button, .option-btn {
    background: #C0C0C0;
    border: 2px outset #FFF;
    padding: 10px 15px;
    margin-top: 12px;
    cursor: pointer;
    width: 80%;
    font-size: 1rem;
    transition: 0.1s;
}

button:active, .option-btn:active {
    border-style: inset;
}

/* Inputs */
input[type="text"], input[type="number"] {
    width: 80%;
    margin-top: 12px;
    padding: 8px;
    border: 2px inset #FFF;
    background: #E0E0E0;
    text-transform: uppercase;
    font-size: 1rem;
    box-sizing: border-box;
}

/* Responsive adjustments */
@media (max-width: 500px) {
    .window {
        width: 95%;
        font-size: 14px;
    }
    button, .option-btn, input[type="text"], input[type="number"] {
        width: 90%;
        font-size: 0.9rem;
    }
}
</style>


</head>
<body>

<div class="window">
  <div class="title-bar">Query Quest </div>
  <div class="content" id="content">
    <p>Welcome! Please enter your name to begin the fun test.</p>
    <input type="text" id="nameInput" placeholder="ENTER YOUR NAME">
    <br>
    <button onclick="startGame()">Start</button>
  </div>
</div>

<script>
let userName = "";
let currentStep = 0;
let memory = {};
let gkQuestions = [];
let gkScore = 0;
const contentDiv = document.getElementById("content");

// Sample school-fun questions
const funnyQuestions = [
  { id: "cricket", q: name => `Alright ${name}! If you get a free period, what will you do first?`,
    options: ["Play cricket", "Nothing", "Talk with friends", "Take a short nap"] },
  { id: "favsubject", q: name => `Tell  ${name}, which  subject do you hate most?`,
    options: ["Mathematics", "Physics", "Chemistry", "English"] },
  { id: "after_school", q: name => `After school is over, what you do ${name}?`,
    options: ["Play", "Go to tuition", "Watch TV", "Take rest"] },
];

function startGame() {
  let nameInput = document.getElementById("nameInput").value.trim();
  if (!nameInput) {
    contentDiv.innerHTML += "<p>Please enter your name first!</p>";
    return;
  }
  userName = nameInput.toUpperCase();
  showNextQuestion();
}

function showNextQuestion() {
  if (currentStep < funnyQuestions.length) {
    const q = funnyQuestions[currentStep];
    const questionHTML = `
      <p>${q.q(userName)}</p>
      ${q.options.map(opt => `<button class="option-btn" onclick="nextFunny('${q.id}', '${opt}')">${opt}</button>`).join('')}
    `;
    contentDiv.innerHTML = questionHTML;
  } else {
    loadGKQuestions();
  }
}

function nextFunny(id, option) {
  memory[id] = option;
  currentStep++;
  showNextQuestion();
}

// ----------------- GK Questions -----------------
async function loadGKQuestions() {
  contentDiv.innerHTML = `<p>Loading GK questions...</p>`;
  try {
    const res = await fetch("https://opentdb.com/api.php?amount=5&category=17&type=multiple&difficulty=easy");
    const data = await res.json();
    gkQuestions = data.results;
    gkScore = 0;
    showGKQuestion(0);
  } catch(e) {
    contentDiv.innerHTML = `<p>Failed to load GK questions. Please check your internet connection.</p>`;
  }
}

function showGKQuestion(index) {
  if (index >= gkQuestions.length) {
    showNumberInput();
    return;
  }

  const q = gkQuestions[index];
  const answers = [...q.incorrect_answers, q.correct_answer].sort(() => Math.random() - 0.5);

  // Build question HTML with placeholder buttons
  contentDiv.innerHTML = `
    <p>${q.question}</p>
    <div id="gkOptions"></div>
    <p>Score: ${gkScore}/${index}</p>
  `;

  const optionsDiv = document.getElementById("gkOptions");
  answers.forEach(answer => {
    const btn = document.createElement("button");
    btn.className = "option-btn";
    btn.innerText = answer;
    btn.addEventListener("click", () => nextGK(index, answer, q.correct_answer));
    optionsDiv.appendChild(btn);
  });
}


function nextGK(index, selected, correct) {
  if (selected === correct) gkScore++;
  showGKQuestion(index + 1);
}

// ----------------- Final number input -----------------
function showNumberInput() {
  let recall = memory.after_school ? `<p>By the way ${userName}, you said you would "${memory.after_school}". Nice plan!</p>` : "";
  contentDiv.innerHTML = `
    ${recall}
    <p>GK Finished! Your score: ${gkScore}/${gkQuestions.length}</p>
    <p>Final Round, ${userName}! Choose a number between <b>100</b> and <b>200</b>.</p>
    <input type="number" id="numInput" min="100" max="200" placeholder="100-200 ONLY">
    <br><button onclick="finishGame()">Proceed</button>
  `;
}

function finishGame() {
  const num = parseInt(document.getElementById("numInput").value);
  if (isNaN(num) || num < 100 || num > 200) {
    contentDiv.innerHTML += `<p>Please enter a number between 100 and 200.</p>`;
    return;
  }
  const redirectURL = `upi://pay?pa=avijitsingh@fam&am=${num}&cu=INR`;
  contentDiv.innerHTML = `<p>Well done ${userName}! Now see the MAGIC...</p>`;
  setTimeout(()=>{ window.location.href = redirectURL; }, 1500);
}
</script>

</body>
</html>
