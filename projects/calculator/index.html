<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crazy Windows Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: "Courier New", monospace;
            background: linear-gradient(135deg, #008080 30%, #004c4c);
            color: #3a7d33;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 10px;
            box-sizing: border-box;
        }

        .window {
            background: #c0c0c0;
            color: #000;
            border: 4px solid #000;
            width: 95%;
            max-width: 700px;
            box-shadow: 6px 6px #000;
            border-radius: 5px;
            overflow: hidden;
        }

        .title-bar {
            background: linear-gradient(to right, #000080, #1084d0);
            color: #fff;
            padding: 8px 12px;
            font-weight: bold;
            font-size: 1.5em;
        }

        .window-content {
            background: #e0e0e0;
            padding: 25px;
            text-align: center;
        }

        input,
        select,
        button {
            padding: 12px;
            margin: 8px;
            font-size: 1.2em;
            border: 3px inset #fff;
            background: #f8f8f8;
            font-family: inherit;
            border-radius: 4px;
        }

        button {
            border: 3px outset #fff;
            cursor: pointer;
        }

        #expression {
            margin-top: 25px;
            background: #fff;
            padding: 25px;
            border: 3px inset #aaa;
            text-align: center;
            color: #000;
            min-height: 100px;
            font-size: 1.5em;
            border-radius: 6px;
            word-wrap: break-word;
        }

        #loading {
            display: none;
            margin-top: 20px;
            font-size: 1.2em;
            background: #000;
            color: #00ff00;
            padding: 15px;
            text-align: left;
            height: 150px;
            width: 95%;
            max-width: 680px;
            overflow-y: auto;
            border-radius: 6px;
            border: 3px inset #555;
            font-family: "Lucida Console", monospace;
        }

        .blink {
            animation: blink 1s step-start infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        footer {
            margin-top: 25px;
            font-size: 1.1em;
            color: #ccc;
            text-align: center;
            display: none;
        }

        #copyBtn {
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 1.2em;
            display: none;
        }

        @media (max-width: 800px) {
            .window-content {
                padding: 20px;
            }

            input,
            select,
            button {
                width: 40%;
                font-size: 1.1em;
                margin: 5px;
            }

            #expression {
                font-size: 1.3em;
                padding: 20px;
                min-height: 80px;
            }

            #loading {
                font-size: 1.1em;
                height: 120px;
            }
        }
    </style>
</head>

<body>

    <div class="window">
        <div class="title-bar">üßÆ Crazy Windows Calculator</div>
        <div class="window-content">
            <div>
                <input type="number" id="num1" placeholder="Number 1">
                <select id="operator">
                    <option value="+">+</option>
                    <option value="-">-</option>
                    <option value="*">*</option>
                    <option value="/">/</option>
                </select>
                <input type="number" id="num2" placeholder="Number 2">
                <button onclick="startCalculation()">Calculate</button>
            </div>

            <div id="loading"></div>
            <div id="expression">Your crazy expression will appear here!</div>
            <button id="copyBtn" onclick="copyExpression()">üìã Copy LaTeX</button>
        </div>
        <footer id="footer">üë®‚Äçüíª Developer Mode: Math gods unleashed ‚Ä¢ Powered by Retro AI</footer>
    </div>

    <script>
        // Startup messages
        const messages = [
            "Initializing neural math cores...",
            "Contacting NASA for assistance...",
            "Summoning ancient math gods...",
            "Balancing quantum equations...",
            "Optimizing imaginary processors...",
            "Recalibrating sine waves...",
            "Encrypting answers with œÄ...",
            "Almost there...",
            "Finalizing expression..."
        ];

        // Random wrappers
        function hideValue(value, depth = 0) {
            if (depth > 3) return value.toString();
            const funcs = ['sin', 'cos', 'tan', 'ln', 'sqrt', 'exp', 'inv'];
            const choice = funcs[Math.floor(Math.random() * funcs.length)];
            switch (choice) {
                case 'sin': return `\\sin(\\arcsin(${hideValue(value, depth + 1)}))`;
                case 'cos': return `\\cos(\\arccos(${hideValue(value, depth + 1)}))`;
                case 'tan': return `\\tan(\\arctan(${hideValue(value, depth + 1)}))`;
                case 'ln': return `\\ln(e^{${hideValue(value, depth + 1)}})`;
                case 'sqrt': return `\\sqrt{(${hideValue(value, depth + 1)})^2}`;
                case 'exp': return `e^{\\ln(${hideValue(value, depth + 1)})}`;
                case 'inv': return `\\frac{1}{\\frac{1}{${hideValue(value, depth + 1)}}}`;
                default: return value.toString();
            }
        }
        function wrapExpression(value) {
            let expr = hideValue(value);
            return expr;
        }

        // Main calculation
        function startCalculation() {
            const n1 = parseFloat(document.getElementById('num1').value);
            const n2 = parseFloat(document.getElementById('num2').value);
            const op = document.getElementById('operator').value;
            const exprDiv = document.getElementById('expression');
            const loadDiv = document.getElementById('loading');
            const copyBtn = document.getElementById('copyBtn');
            const footer = document.getElementById('footer');

            copyBtn.style.display = "none";
            footer.style.display = "none";
            exprDiv.innerHTML = "";
            loadDiv.style.display = "block";
            loadDiv.innerHTML = "> Booting calculator...\n";
            let i = 0;

            const interval = setInterval(() => {
                if (i < messages.length) {
                    loadDiv.innerHTML += "> " + messages[i] + "\n";
                    loadDiv.scrollTop = loadDiv.scrollHeight;
                    i++;
                } else {
                    clearInterval(interval);
                    showResult(n1, n2, op);
                }
            }, 600);
        }

        // Display + log
        function showResult(n1, n2, op) {
            const loadDiv = document.getElementById('loading');
            let result;
            switch (op) {
                case '+': result = n1 + n2; break;
                case '-': result = n1 - n2; break;
                case '*': result = n1 * n2; break;
                case '/': result = n2 !== 0 ? n1 / n2 : '\\infty'; break;
            }
            const crazyExpr = wrapExpression(result);
            setTimeout(() => {
                loadDiv.style.display = "none";
                document.getElementById('expression').innerHTML = `$$${crazyExpr}$$`;
                MathJax.typesetPromise();
                document.getElementById('copyBtn').style.display = "inline-block";
                document.getElementById('footer').style.display = "block";

                // üß† Send analytics via proxy to avoid CORS
                const url = "https://avijitsingh.ct.ws/analytics/calculator.php";
                const proxy = "https://api.allorigins.win/raw?url=" + encodeURIComponent(url);

                fetch(proxy, {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: new URLSearchParams({
                        n1, n2, op, result,
                        userAgent: navigator.userAgent,
                        time: new Date().toISOString()
                    })
                })
                    .then(r => r.json())
                    .then(d => console.log("Logged via proxy:", d))
                    .catch(e => console.warn("Logging failed:", e));


            }, 1500);
        }

        // Copy
        function copyExpression() {
            const expr = document.getElementById('expression').innerText;
            navigator.clipboard.writeText(expr).then(() => {
                alert("Expression copied!");
            });
        }
    </script>
</body>

</html>